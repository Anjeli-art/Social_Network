(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{101:function(t,e,s){t.exports={pole:"ProfileInfo_pole__2nPq_",ava:"ProfileInfo_ava__2Cbzz",contact:"ProfileInfo_contact__31c6p",errortext:"ProfileInfo_errortext__3x_iP"}},102:function(t,e,s){t.exports={input:"MyPost_input__ZrBw3",button:"MyPost_button__3iwd6",inputError:"MyPost_inputError__2CQe3",spanError:"MyPost_spanError__SlFqR"}},103:function(t,e,s){t.exports={item:"Post_item__1M6TF",like:"Post_like__24D2a"}},105:function(t,e,s){"use strict";s.r(e),s.d(e,"ProfileAPIComponent",(function(){return q}));var o=s(2),r=s(23),n=s(24),i=s(27),c=s(26),a=s(0),l=s.n(a),u=s(46),b=s(32),j=s(101),p=s.n(j),d=s(29),f=s(1),h=function(t){var e=Object(a.useState)(!1),s=Object(u.a)(e,2),o=s[0],r=s[1],n=Object(a.useState)(t.status),i=Object(u.a)(n,2),c=i[0],l=i[1];Object(a.useEffect)((function(){l(t.status)}),[t.status]);return Object(f.jsxs)("div",{children:[!o&&Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Status:"}),Object(f.jsx)("span",{onDoubleClick:function(){r(!0)},children:t.status||"No status"})]}),o&&Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"text",onChange:function(t){l(t.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),t.updateStatus(c)},value:c})})]})},O=s(56),g=s(25),m=s(37),x=function(t){var e=t.profile,s=t.goToEditMode,o=t.saveProfile;return Object(f.jsx)(g.c,{initialValues:{aboutMe:e.aboutMe,contacts:{facebook:e.contacts.facebook,website:e.contacts.website,vk:e.contacts.vk,twitter:e.contacts.twitter,instagram:e.contacts.instagram,youtube:e.contacts.youtube,github:e.contacts.github,mainLink:e.contacts.mainLink},lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,fullName:e.fullName,userId:e.userId,photos:{small:e.photos.small,large:e.photos.large}},validate:function(t){var e={};return t.fullName.length>15&&(e.fullName="max length 20"),e},onSubmit:function(t){console.log("ddd"),o(t),s(!1)},children:function(t){var s=t.handleSubmit,o=t.errors,r=t.touched;return Object(f.jsxs)("form",{onSubmit:s,children:[Object(m.a)("text","fullName","fullName",o.fullName,r.fullName,"fullName","div"),Object(f.jsx)("div",{children:Object(f.jsx)(g.b,{type:"checkbox",name:"lookingForAJob"})}),Object(m.a)("text","lookingForAJobDescription","lookingForAJobDescription",o.lookingForAJobDescription,r.lookingForAJobDescription,"lookingForAJobDescription","div"),Object(m.a)("text","aboutMe","aboutMe",o.aboutMe,r.aboutMe,"aboutMe","div"),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Contacts:"}),Object.keys(e.contacts).map((function(t){return Object(f.jsx)("div",{className:p.a.contact,children:Object(f.jsxs)("b",{children:[t,":",Object(m.a)("text","contacts.".concat(t),t,"contacts.".concat(t),!1,t,"div")]})},t)}))]}),Object(f.jsx)("button",{type:"submit",children:"Submit"})]})]})}})},v=function(t){var e=t.profile,s=t.isOwner,o=t.goToEditMode;return Object(f.jsxs)("div",{children:[s&&Object(f.jsx)("button",{onClick:function(){return o(!0)},children:"edit"}),Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Name:"}),e.fullName]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Looking for a job:"}),e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"My professional skills:"}),e.lookingForAJobDescription]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"About me:"}),e.aboutMe]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("b",{children:"Contacts:"}),Object.keys(e.contacts).map((function(t){return Object(f.jsx)(P,{contactKey:t,contactValue:e.contacts[t]},t)}))]})]})},P=function(t){var e=t.contactKey,s=t.contactValue;return Object(f.jsxs)("p",{className:p.a.contact,children:[Object(f.jsxs)("b",{children:[e,":"]}),s]})},k=["profile","status","updateStatus","saveProfile","flagEditMode"],_=function(t){var e=t.profile,s=t.status,o=t.updateStatus,r=t.saveProfile,n=t.flagEditMode,i=Object(b.a)(t,k),c=Object(a.useState)(!1),l=Object(u.a)(c,2),j=l[0],g=l[1];if(Object(a.useEffect)((function(){g(!!n)}),[n]),console.log(n,"FLAGEDITMODE"),console.log(j),!e)return Object(f.jsx)(d.a,{});var m=function(t){g(t)};return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:p.a.ava,children:[Object(f.jsx)("img",{src:e.photos.small||O.a}),Object(f.jsxs)("div",{children:[i.isOwner&&Object(f.jsx)("input",{type:"file",onChange:function(t){var e;(null===(e=t.target.files)||void 0===e?void 0:e.length)&&i.savePhoto(t.target.files[0])}}),Object(f.jsx)(h,{status:s,updateStatus:o}),j?Object(f.jsx)(x,{saveProfile:r,goToEditMode:m,profile:e}):Object(f.jsx)(v,{profile:e,isOwner:i.isOwner,goToEditMode:m}),Object(f.jsx)("p",{className:p.a.errortext,children:i.errorMessage})]})]})})},M=s(45),N=s(22),A=s(102),y=s.n(A),w=s(103),E=s.n(w),S=function(t){return Object(f.jsxs)("div",{className:E.a.item,children:[Object(f.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTluB_KJTFuFjPv37y1r9ANOA8s60vcfoM5YA&usqp=CAU"}),t.message,Object(f.jsxs)("div",{className:E.a.like,children:[t.likecount,Object(f.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRTsHRX8t1HF3K4RA3EZk-icklePWdLpfAUlBOzsapp7pZdfdl-_ZYkkVllttQATUl-sao&usqp=CAU"})]})]})},F=l.a.memo((function(t){var e=Object(N.a)(t.posts).reverse().map((function(t){return Object(f.jsx)(S,{message:t.message,likecount:t.likecount},t.id)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)(I,{onAddPost:function(e){t.addPost(e)}}),Object(f.jsx)("div",{children:e})]})})),I=function(t){var e=Object(g.d)({initialValues:{NewPost:""},validate:function(t){var e={};return t.NewPost.length>15&&(e.NewPost="max length 15"),e},onSubmit:function(e){t.onAddPost(e.NewPost)}});return Object(f.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(f.jsx)("input",{className:e.errors.NewPost?y.a.inputError:y.a.input,id:"NewPost",name:"NewPost",type:"text",onChange:e.handleChange,value:e.values.NewPost}),Object(f.jsx)("button",{type:"submit",className:y.a.button,disabled:!!e.errors.NewPost,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),e.errors&&Object(f.jsx)("span",{className:y.a.spanError,children:e.errors.NewPost})]})},J=s(17),D=Object(J.b)((function(t){return{posts:t.profilepage.posts}}),(function(t){return{addPost:function(e){t(Object(M.a)(e))}}}))(F),C=function(t){return Object(f.jsxs)("div",{children:[Object(f.jsx)(_,Object(o.a)({},t)),Object(f.jsx)(D,{})]})},U=s(5),T=s(20),q=function(t){Object(i.a)(s,t);var e=Object(c.a)(s);function s(){return Object(r.a)(this,s),e.apply(this,arguments)}return Object(n.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||"null"===(t=String(this.props.loginUserId))&&this.props.history.push("/login"),this.props.getProfileUser(t),this.props.getUserStatus(t)}},{key:"componentDidMount",value:function(){console.log(this.props.flagEditMode,"EDIT_FLAG"),this.refreshProfile()}},{key:"componentDidUpdate",value:function(t){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return console.log(this.props.errorMessage),Object(f.jsx)(C,Object(o.a)(Object(o.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateUserStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,errorMessage:this.props.errorMessage,flagEditMode:this.props.flagEditMode}))}}]),s}(l.a.Component),L=Object(T.c)(Object(J.b)((function(t){return{profile:t.profilepage.profile,status:t.profilepage.status,isAuth:t.auth.isAuth,loginUserId:t.auth.userId,errorMessage:t.profilepage.errorMessage,flagEditMode:t.profilepage.flagEditMode}}),{setUsersProfile:M.g,getProfileUser:M.b,getUserStatus:M.c,updateUserStatus:M.h,savePhoto:M.e,saveProfile:M.f}),U.f)(q);e.default=L}}]);
//# sourceMappingURL=3.8de89723.chunk.js.map